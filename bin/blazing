#!/usr/bin/env ruby -w

require 'bundler'
Bundler.setup

require 'optparse'
require 'methadone'
require 'blazing'
require 'blazing/config'
require 'blazing/runner'

include Methadone::Main

main do |command|
  if command == 'init'
    config = {}
  else
    config = Blazing::Config.parse(options[:file])
  end

  runner = Blazing::Runner.new(config)
  runner.exec(command)
end

arg :command
on("-f configuration", "--file configuration", "config file location (defaults to config/blazing.rb)")

go!
